<?phpclass ControllerModuleCategoryIntroduce extends Controller {    public function index($setting) {        $data['heading_title'] = $this->language->get('heading_title');        $this->load->model('news/category');        $this->load->model('news/news');        $this->load->model('menu/menu');        $this->load->model('tool/image');        if (is_file(DIR_IMAGE . $this->config->get('config_logo'))) {            $data['logo'] = $server . 'image/' . $this->config->get('config_logo');        } else {            $data['logo'] = '';        }        $data['name'] = '';        $data['text_introduce'] = '';        $data['new_introduce'] = array();        $data['new_produce'] = array();        $data['category'] = array();        $data['menus'] = array();        $this->load->model('menu/menu');        $menu_group_id = $setting['menu_id'];        $results = $this->model_menu_menu->getMenus(0, $menu_group_id);        foreach ($results as $result) {            $get_name = $this->model_menu_menu->getNameMenuModule($result['menu_id'], $result['menu_type_id'], $result['name_id']);            $data['menus'][] = array(                'menu_id' => $get_name[0]['menu_id'],                'name' => $get_name[0]['name'],            );        }        if (!empty($setting['name'])) {            $data['name'] = $setting['name'];        }        if (!empty($setting['text_introduce'])) {            $data['text_introduce'] = $setting['text_introduce'];        }        if (!empty($setting['new_introduce_id'])) {            $data['new_introduce'] = $this->model_news_news->getNews($setting['new_introduce_id']);            if ($data['new_introduce']['image']) {                $data['new_introduce']['image'] = $this->model_tool_image->resize($data['new_introduce']['image'], '168', '113');            } else {                $data['new_introduce']['image'] = $this->model_tool_image->resize('placeholder.png', '168', '113');            }            $data['new_introduce']['href'] = $this->url->link('news/news', $url . '&news_id=' . $data['new_introduce']['news_id']);        }        if (!empty($setting['new_produce_id'])) {            $data['new_produce'] = $this->model_news_news->getNews($setting['new_produce_id']);            if ($data['new_produce']['image']) {                $$data['new_produce']['image'] = $this->model_tool_image->resize($data['new_produce']['image'], '168', '113');            } else {                $$data['new_produce']['image'] = $this->model_tool_image->resize('placeholder.png', '168', '113');            }            $data['new_produce']['href'] = $this->url->link('news/news', $url . '&news_id=' . $data['new_produce']['news_id']);        }        if (!empty($setting['category_id'])) {            $category = $setting['category_id'];            $category_info = $this->model_news_category->getCategory($category);            if ($category_info) {//                if ($category_info['image']) {//                    $image = $this->model_tool_image->resize($category_info['image'], '293', '210');//                } else {//                    $image = $this->model_tool_image->resize('placeholder.png', '293', '210');//                }                $data_['newss'] = array();                $filter_data = array(                    'filter_category_id' => $category_info['category_id'],                    'filter_filter' => '',                    'sort' => '',                    'order' => '',                    'start' => 0,                    'limit' => 8                );                $results = $this->model_news_news->getNewss($filter_data);                foreach ($results as $result) {                    $data_['newss'][] = array(                        'news_id' => $result['news_id'],                        'name' => $result['name'],                        'rating' => $result['rating'],                        'href' => $this->url->link('news/news', 'cat_news_id=' . $this->request->get['cat_news_id'] . '&news_id=' . $result['news_id'] . $url)                    );                }                $data['category'] = array(                    'name' => $category_info['name'],                    'news' => $data_['newss']                );            }        }        //var_dump($data['menus']);die;        if ($data) {            return $this->load->view('module/category_introduce', $data);        }    }    private function getPath($menu_id, $menu_group_id) {        $this->load->model('menu/menu');        $menus = array();        $results = $this->model_menu_menu->getMenus($menu_id, $menu_group_id);        foreach ($results as $result) {            $get_name = $this->model_menu_menu->getNameMenu($result['menu_id'], $result['menu_type_id'], $result['name_id']);            $menus[] = array(                'menu_id' => $result['menu_id'],                'name' => $get_name['name'],                'children' => $this->getPath($result['menu_id'], $menu_group_id),                'href' => $get_name['href'],                'attribute' => $get_name['attribute']            );        }        return $menus;    }}